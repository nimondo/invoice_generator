{% extends 'invoices/base.html' %}

{% block title %}Generate Invoice - Invoice Management System{% endblock %}

{% block content %}
<h1 class="mb-4">Generate Invoice</h1>
<form action="{% url 'generate_invoice' client_id=selected_client.id %}" method="get"></form>
<!-- <form action="{% url 'generate_invoice' selected_client.id %}" method="get"> -->
<div class="form-group">
    <label for="client">Select Client:</label>
    <select id="client" name="client_id" class="form-control" required>
        {% for client in clients %}
        <option value="{{ client.id }}">{{ client.first_name }} {{ client.last_name }}</option>
        {% endfor %}
    </select>
</div>

<div class="form-group">
    <label for="products">Select Products:</label>
    <select id="products" name="product_ids" class="form-control" multiple required>
        {% for product in products %}
        <option value="{{ product.id }}">
            {{ product.name }} - {{ product.price }}â‚¬ (TVA: {{ product.tva }}%)
        </option>
        {% endfor %}
    </select>
    <small class="form-text text-muted">Hold down the Ctrl (windows) or Command (Mac) button to select
        multiple options.</small>
</div>

<button type="submit" class="btn btn-primary" {% if not clients %}disabled{% endif %}>Generate Invoice</button>
</form>
{% endblock %}